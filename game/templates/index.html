{% extends 'basic.html' %}

{% block content %}
    <h2 class="text-center py-2">Steam библиотека</h2>
    <form class="mb-4 mx-auto text-center">
        <input type="text" name="login" placeholder="Введите логин пользователя" {%if login%}value="{{login}}"{%endif%} class="text-light bg-secondary border-theme" required>
        <input type="submit" value="Показать игры" class="text-light bg-secondary border-theme">
    </form>

    {% if games %}
        <table class="w-50 mb-3 fs-3 fw-bolder">
            <tr class="w-25">
                <td class="p-2">Всего игр</td>
                <td>{{games_count}}</td>
            </tr>
            <tr>
                <td>Среднее время игры</td>
                <td>{{avg_time}} ч</td>
            </tr>
            <tr>
                <td>Сыграно игр</td>
                <td>{{played_games_percent}} % ({{played_games_count}} / {{games_count}})</td>
            </tr>
        </table>

        <input type="text" id="search-input" placeholder="Поиск" class="mb-4">

        <table class="w-100">
          {% for game in games %}
            <tr class="border-theme w-100">
                <td class="text-center px-2 {% if forloop.counter0 < 10 %}fs-3 fw-bolder{%else%}fs-4{%endif%}">{{forloop.counter}}</td>
                <td><img src="https://media.steampowered.com/steam/apps/{{game.appid}}/header.jpg" alt="{{game.image}}" class="img-fluid h-100"></td>
                <td class="ps-3 w-50"><a href="{% url 'game:detail' game.appid %}" class="game-name fs-3 fw-bold text-decoration-none text-light">{{game.title}}</a></td>
                <td class="fs-4 fst-italic pe-3 text-center w-25">{%if game.time > 0%}{{game.time}} ч.{%endif%}</td>
            </tr>
          {% endfor %}
        </table>
    {% elif userid %}
        <div class="fs-3 text-center py-2">У пользователя нет игр на аккаунте</div>
    {% elif error%}
        <div class="fs-3 text-center py-2">{{error|safe}}</div>
    {% else %}
        <div class="fs-3 text-center py-2">Введите логин пользователя для показа списка игр аккаунта</div>
    {% endif %}
{% endblock %}
